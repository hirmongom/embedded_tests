<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>STM32F10RB Microcontroller: GPIO Functions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">STM32F10RB Microcontroller
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "../../search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('dd/d89/group__gpio__func.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GPIO Functions<div class="ingroups"><a class="el" href="../../d1/d2b/group__gpio.html">gpio.h</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga02268e6fb69300da6350cbfd7f9c876e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#ga02268e6fb69300da6350cbfd7f9c876e">gpioPinSetup</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, <a class="el" href="../../d7/db2/group__gpio__enum.html#ga270cd8106146c63974f6b77328b86649">GpioMode</a> mode)</td></tr>
<tr class="memdesc:ga02268e6fb69300da6350cbfd7f9c876e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the mode of a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#ga02268e6fb69300da6350cbfd7f9c876e">More...</a><br /></td></tr>
<tr class="separator:ga02268e6fb69300da6350cbfd7f9c876e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a4bb7e44c3a94f1f32ed5697944d1f5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#ga5a4bb7e44c3a94f1f32ed5697944d1f5">gpioPinPullTypeSetup</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, <a class="el" href="../../d7/db2/group__gpio__enum.html#gabe63dafb245e051f118900fc06880e80">GpioPullType</a> pull_type)</td></tr>
<tr class="memdesc:ga5a4bb7e44c3a94f1f32ed5697944d1f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures the pull type of a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#ga5a4bb7e44c3a94f1f32ed5697944d1f5">More...</a><br /></td></tr>
<tr class="separator:ga5a4bb7e44c3a94f1f32ed5697944d1f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga70eb92fb6c4a7bc6a5b9d2fce59de60c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#ga70eb92fb6c4a7bc6a5b9d2fce59de60c">gpioPinRead</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, uint8_t *read)</td></tr>
<tr class="memdesc:ga70eb92fb6c4a7bc6a5b9d2fce59de60c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the value of a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#ga70eb92fb6c4a7bc6a5b9d2fce59de60c">More...</a><br /></td></tr>
<tr class="separator:ga70eb92fb6c4a7bc6a5b9d2fce59de60c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaadb0288142a6da5bad47d65e8dbec959"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#gaadb0288142a6da5bad47d65e8dbec959">gpioPinWrite</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, uint8_t value, uint8_t *old_value)</td></tr>
<tr class="memdesc:gaadb0288142a6da5bad47d65e8dbec959"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes a value to a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#gaadb0288142a6da5bad47d65e8dbec959">More...</a><br /></td></tr>
<tr class="separator:gaadb0288142a6da5bad47d65e8dbec959"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a74d9e02fac98a33137682520f5e1df"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#ga8a74d9e02fac98a33137682520f5e1df">gpioPinToggle</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, uint8_t *old_value)</td></tr>
<tr class="memdesc:ga8a74d9e02fac98a33137682520f5e1df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Toggles the value of a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#ga8a74d9e02fac98a33137682520f5e1df">More...</a><br /></td></tr>
<tr class="separator:ga8a74d9e02fac98a33137682520f5e1df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1546a934b316e36440509dfd56d7c830"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d89/group__gpio__func.html#ga1546a934b316e36440509dfd56d7c830">gpioInterruptSet</a> (<a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *port, uint8_t pin, uint8_t rising_edge, uint8_t priority, void(*handler)(void))</td></tr>
<tr class="memdesc:ga1546a934b316e36440509dfd56d7c830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets up an interrupt for a GPIO pin.  <a href="../../dd/d89/group__gpio__func.html#ga1546a934b316e36440509dfd56d7c830">More...</a><br /></td></tr>
<tr class="separator:ga1546a934b316e36440509dfd56d7c830"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga02268e6fb69300da6350cbfd7f9c876e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga02268e6fb69300da6350cbfd7f9c876e">&#9670;&nbsp;</a></span>gpioPinSetup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioPinSetup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/db2/group__gpio__enum.html#ga270cd8106146c63974f6b77328b86649">GpioMode</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the mode of a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to configure. (0 - 15) </td></tr>
    <tr><td class="paramname">mode</td><td>The mode to set for the pin. (from GpioMode enum)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function configures the mode of a GPIO pin on the STM32F10RB microcontroller. The pin number should be within the range 0-15. The GPIO port is checked for initialization, and if not initialized, it is enabled. The pin mode is then set according to the provided mode. The mode parameter should be one of the values from the GpioMode enumeration. Upon successful configuration, the function returns 0. Otherwise, 1 is returned and variables errnum and errcode are set with the error code.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000003">Todo:</a></b></dt><dd>Add option to configure port speed </dd></dl>
<div class="fragment"><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                                                              {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  <span class="comment">// Check if port is initializated, if not, initialize it</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (port == GPIOA) {</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">if</span> (!(RCC-&gt;AHB1ENR &amp; (1 &lt;&lt; 0))) {</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      RCC-&gt;AHB1ENR |= (1 &lt;&lt; 0);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;      delay();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    }</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOB) {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;    <span class="keywordflow">if</span> (!(RCC-&gt;AHB1ENR &amp; (1 &lt;&lt; 1))) {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      RCC-&gt;AHB1ENR |= (1 &lt;&lt; 1);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;      delay();</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    } </div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  }</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOC) {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span> (!(RCC-&gt;AHB1ENR &amp; (1 &lt;&lt; 2))) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;      RCC-&gt;AHB1ENR |= (1 &lt;&lt; 2);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;      delay();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOH) {</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (!(RCC-&gt;AHB1ENR &amp; (1 &lt;&lt; 7))) {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;      RCC-&gt;AHB1ENR |= (1 &lt;&lt; 7);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;      delay();</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 1;  <span class="comment">// Wrong GPIO port</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a1e4ff7ca2e618e255c9079e524444fa9">MODER</a> &amp;= ~(3 &lt;&lt; pin * 2); <span class="comment">// Reset mode before overwritting with new one</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a1e4ff7ca2e618e255c9079e524444fa9">MODER</a> |= (mode &lt;&lt; pin * 2);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div>
<div class="ttc" id="agroup__errvar_html_ga5307a02392eb82c21b66dc029fc3900f"><div class="ttname"><a href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a></div><div class="ttdeci">uint16_t errnum</div><div class="ttdoc">Error number variable.</div><div class="ttdef"><b>Definition:</b> err.h:65</div></div>
<div class="ttc" id="agroup__errvar_html_ga9920935c0cd3c9050ba4197c399c9615"><div class="ttname"><a href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a></div><div class="ttdeci">uint16_t errcode</div><div class="ttdoc">Error code variable.</div><div class="ttdef"><b>Definition:</b> err.h:82</div></div>
<div class="ttc" id="agroup__gpio__reg_html_a1e4ff7ca2e618e255c9079e524444fa9"><div class="ttname"><a href="../../de/d6c/group__gpio__reg.html#a1e4ff7ca2e618e255c9079e524444fa9">GPIO_Type::MODER</a></div><div class="ttdeci">__IO uint32_t MODER</div><div class="ttdef"><b>Definition:</b> stm32f410rb.h:123</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga5a4bb7e44c3a94f1f32ed5697944d1f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5a4bb7e44c3a94f1f32ed5697944d1f5">&#9670;&nbsp;</a></span>gpioPinPullTypeSetup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioPinPullTypeSetup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/db2/group__gpio__enum.html#gabe63dafb245e051f118900fc06880e80">GpioPullType</a>&#160;</td>
          <td class="paramname"><em>pull_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures the pull type of a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to configure. (0 - 15) </td></tr>
    <tr><td class="paramname">pull_type</td><td>The pull type to set for the pin. (from GpioPullType enum)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function configures the pull type of a GPIO pin on the STM32F10RB microcontroller. The function checks if the provided GPIO port is correct and initialized. The pin number should be within the range 0-15. The pull type is then set according to the provided type, which should be one of the values from the GpioPullType enumeration. Upon successful configuration, the function returns 0. Otherwise, 1 is returned and variables errnum and errcode are set with the error code.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000004">Todo:</a></b></dt><dd>Check if port is correct and if it is initializated </dd></dl>
<div class="fragment"><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                                                               {</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;  port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a618881b88a3b1aeb222ef63b95a479a3">PUPDR</a> &amp;= ~(3 &lt;&lt; pin * 2);</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;  port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a618881b88a3b1aeb222ef63b95a479a3">PUPDR</a> |= (pull_type &lt;&lt; pin * 2);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div>
<div class="ttc" id="agroup__gpio__reg_html_a618881b88a3b1aeb222ef63b95a479a3"><div class="ttname"><a href="../../de/d6c/group__gpio__reg.html#a618881b88a3b1aeb222ef63b95a479a3">GPIO_Type::PUPDR</a></div><div class="ttdeci">__IO uint32_t PUPDR</div><div class="ttdef"><b>Definition:</b> stm32f410rb.h:126</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga70eb92fb6c4a7bc6a5b9d2fce59de60c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga70eb92fb6c4a7bc6a5b9d2fce59de60c">&#9670;&nbsp;</a></span>gpioPinRead()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioPinRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>read</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the value of a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to read from. (0 - 15) </td></tr>
    <tr><td class="paramname">read</td><td>Pointer to store the read value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function reads the value of a GPIO pin on the STM32F10RB microcontroller. The pin number should be within the range 0-15. The function checks if the provided GPIO port is correct and initialized, as well as the mode of the pin. Upon successful read, the function stores the read value in the memory location pointed to by the 'read' parameter. The read value will be either 0 or 1, indicating the logic level of the pin. If an error occurs, 1 is returned, and variables errnum and errcode are set with the error code.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000005">Todo:</a></b></dt><dd>Check if the GPIO port is correct and if it is initialized and in the appropriate mode. </dd></dl>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                                                             {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  </div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  uint32_t pin_value = (port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a7202422c37d73e011c41fa0ced908176">IDR</a> &gt;&gt; pin) &amp; 0x01;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;  *read = (uint8_t) pin_value;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;}</div>
<div class="ttc" id="agroup__gpio__reg_html_a7202422c37d73e011c41fa0ced908176"><div class="ttname"><a href="../../de/d6c/group__gpio__reg.html#a7202422c37d73e011c41fa0ced908176">GPIO_Type::IDR</a></div><div class="ttdeci">__I uint32_t IDR</div><div class="ttdef"><b>Definition:</b> stm32f410rb.h:127</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="gaadb0288142a6da5bad47d65e8dbec959"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaadb0288142a6da5bad47d65e8dbec959">&#9670;&nbsp;</a></span>gpioPinWrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioPinWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>old_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Writes a value to a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to write to. (0 - 15) </td></tr>
    <tr><td class="paramname">value</td><td>The value to write. (0 or 1) </td></tr>
    <tr><td class="paramname">old_value</td><td>Pointer to store the previous pin value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function writes a value (0 or 1) to a GPIO pin on the STM32F10RB microcontroller. The pin number should be within the range 0-15. The function checks if the provided GPIO port is correct and initialized, as well as the mode of the pin. The previous value of the pin is stored in the memory location pointed to by the 'old_value' parameter. If the 'value' parameter is 0, the pin is cleared (set to logic low). If the 'value' parameter is 1, the pin is set (set to logic high). If an error occurs, 1 is returned, and variables errnum and errcode are set with the error code.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000006">Todo:</a></b></dt><dd>Check if the GPIO port is correct and if it is initialized and in the appropriate mode. </dd></dl>
<div class="fragment"><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                                                                  {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  }</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;  uint32_t pin_value = (port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a7202422c37d73e011c41fa0ced908176">IDR</a> &gt;&gt; pin) &amp; 0x01;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;  *old_value = (uint8_t) pin_value;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  <span class="keywordflow">if</span> (value == 0) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a35e605626c6b8e326521b903727e1734">ODR</a> &amp;= ~(1 &lt;&lt; pin);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (value == 1) {</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a35e605626c6b8e326521b903727e1734">ODR</a> |= (1 &lt;&lt; pin);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 5;  <span class="comment">// Tried to write wrong value</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  }</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div>
<div class="ttc" id="agroup__gpio__reg_html_a35e605626c6b8e326521b903727e1734"><div class="ttname"><a href="../../de/d6c/group__gpio__reg.html#a35e605626c6b8e326521b903727e1734">GPIO_Type::ODR</a></div><div class="ttdeci">__IO uint32_t ODR</div><div class="ttdef"><b>Definition:</b> stm32f410rb.h:128</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ga8a74d9e02fac98a33137682520f5e1df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a74d9e02fac98a33137682520f5e1df">&#9670;&nbsp;</a></span>gpioPinToggle()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioPinToggle </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>old_value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Toggles the value of a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to toggle. (0 - 15) </td></tr>
    <tr><td class="paramname">old_value</td><td>Pointer to store the previous pin value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function toggles the value of a GPIO pin on the STM32F10RB microcontroller. The pin number should be within the range 0-15. The function checks if the provided GPIO port is correct and initialized, as well as the mode of the pin. The previous value of the pin is stored in the memory location pointed to by the 'old_value' parameter. If the pin is currently low, it is toggled to high. If the pin is currently high, it is toggled to low. If an error occurs, 1 is returned, and variables errnum and errcode are set with the error code.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000007">Todo:</a></b></dt><dd>Check if the GPIO port is correct and if it is initialized and in the appropriate mode. </dd></dl>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                                                                    {</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  }</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;  </div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  uint32_t pin_value = (port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a7202422c37d73e011c41fa0ced908176">IDR</a> &gt;&gt; pin) &amp; 0x01;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  *old_value = (uint8_t) pin_value;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  port-&gt;<a class="code" href="../../de/d6c/group__gpio__reg.html#a35e605626c6b8e326521b903727e1734">ODR</a> ^= (1 &lt;&lt; pin);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga1546a934b316e36440509dfd56d7c830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1546a934b316e36440509dfd56d7c830">&#9670;&nbsp;</a></span>gpioInterruptSet()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int gpioInterruptSet </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6c/group__gpio__reg.html#d9/d01/structGPIO__Type">GPIO_Type</a> *&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>rising_edge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void)&#160;</td>
          <td class="paramname"><em>handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets up an interrupt for a GPIO pin. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Pointer to the GPIO port. (Use GPIOx definitios from <a class="el" href="../../d2/d27/stm32f410rb_8h_source.html">stm32f410rb.h</a>) </td></tr>
    <tr><td class="paramname">pin</td><td>The pin number to set up the interrupt for. (0 - 15) </td></tr>
    <tr><td class="paramname">rising_edge</td><td>Set to 1 for rising edge trigger, 0 for falling edge trigger. (0 or 1) </td></tr>
    <tr><td class="paramname">priority</td><td>The interrupt priority level (between 7 and 15). </td></tr>
    <tr><td class="paramname">handler</td><td>Pointer to the interrupt handler function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successful, otherwise returns 1 and sets variables errnum and errcode.</dd></dl>
<p>This function sets up an interrupt for a GPIO pin on the STM32F10RB microcontroller. The pin number should be within the range 0-15. The function checks if the provided GPIO port is correct and initialized. It also validates the rising_edge and priority parameters. The interrupt trigger type is set based on the rising_edge parameter, with 1 indicating a rising edge trigger and 0 indicating a falling edge trigger. The priority parameter sets the interrupt priority level, which should be between 7 and 15 (inclusive). The handler parameter is a pointer to the interrupt handler function that will be executed when the interrupt occurs. Upon successful setup, the function returns 0. If an error occurs, 1 is returned, and variables errnum and errcode are set with the appropriate error codes.</p>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000008">Todo:</a></b></dt><dd><p class="startdd">Check if the GPIO port is correct and if it is initialized. </p>
<p class="enddd">Clarify the allowed range for the priority parameter and which value is higher prio </p>
</dd></dl>
<div class="fragment"><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                                                                                                                 {</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  <span class="keywordflow">if</span> (pin &gt; 15) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 2;  <span class="comment">// Wrong pin number</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  <span class="keywordflow">if</span> (rising_edge &gt; 1) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 6;  <span class="comment">// Wrong value for trigger selection</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="keywordflow">return</span> 1;  <span class="comment">// Can only be 0 or 1</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;  }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;  <span class="keywordflow">if</span> (priority &lt; 7) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 7: <span class="comment">// Wrong interrupt priority</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;  } </div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    </div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  uint8_t exti_source_input;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  <span class="keywordflow">if</span> (port == GPIOA)</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    exti_source_input = 0;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOB)</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    exti_source_input = 1;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOC)</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    exti_source_input = 2;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (port == GPIOH)</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    exti_source_input = 7;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga5307a02392eb82c21b66dc029fc3900f">errnum</a> = 1;  <span class="comment">// GPIO error</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <a class="code" href="../../d3/d14/group__errvar.html#ga9920935c0cd3c9050ba4197c399c9615">errcode</a> = 1;  <span class="comment">// Wrong GPIO port</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160; </div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  RCC-&gt;APB2ENR |= (1 &lt;&lt; 14);    <span class="comment">// Enable system configuration controller clock</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  SYSCFG-&gt;EXTICR[pin / 4] &amp;= ~(0xF &lt;&lt; (pin % 4) * 4); <span class="comment">// Clear register</span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  SYSCFG-&gt;EXTICR[pin / 4] |= (exti_source_input &lt;&lt; (pin % 4) * 4);  <span class="comment">// Select source input for the EXTIx</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;  </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  EXTI-&gt;IMR |= (1 &lt;&lt; pin);  <span class="comment">// Set pin in EXTI line as interrupt</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="keywordflow">if</span> (rising_edge == 1) {</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    EXTI-&gt;RTSR |= (1 &lt;&lt; pin); <span class="comment">// Enable rising edge trigger</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    EXTI-&gt;FTSR &amp;= ~(1 &lt;&lt; pin);  <span class="comment">// Disable falling edge trigger</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    EXTI-&gt;RTSR &amp;= ~(1 &lt;&lt; pin);  <span class="comment">// Disable rising edge trigger</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    EXTI-&gt;FTSR |= (1 &lt;&lt; pin); <span class="comment">// Enable falling edge trigger</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;  }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  <span class="comment">// Set priority and set-enable interrupt</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;  <span class="keywordflow">if</span> (pin &lt;= 4) {</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    NVIC-&gt;IPR[6 + pin] |= (priority &lt;&lt; 4);</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    NVIC-&gt;ISER[0] |= (1 &lt;&lt; (6 + pin));</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pin &lt;= 9) {</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    NVIC-&gt;IPR[23] |= (priority &lt;&lt; 4);</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    NVIC-&gt;ISER[0] |= (1 &lt;&lt; 23);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    NVIC-&gt;IPR[40] |= (priority &lt;&lt; 4);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    NVIC-&gt;ISER[1] |= (1 &lt;&lt; 8);</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  }</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160; </div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  gpio_isr_functions[pin] = handler;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
